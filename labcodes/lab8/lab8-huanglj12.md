# lab8 report

##[练习1]完成读文件操作的实现
> 设计方案：

> 结构：文件、写位置、读位置、锁。 

> 文件，可用于不同进程的读写。 写位置：写入时更新。 读位置：读取时更新。锁：若读位置等于写位置时读取，那么等待这个锁。写后，如果有进程在等待，唤醒。读后，如果读位置小于写位置，且有进程在等待，唤醒。

##[练习2]完成基于文件系统的执行程序机制的实现
> 基于”UNIX的硬链接和软链接机制“的概要设方案：

> 硬链接：接口`int vfs_link(char *old_path, char *new_path);`。创建new_file的文件，把inode指向old_path的inode，引用计数加1。读写操作的时候，会自动操作用一个inode，无需修改；删除操作时，引用计数减1，如果减至0，删除这个文件。

> 软链接：创建软链接时分配创建一个新的文件（这时创建了一个新的inode），并把old_path的内容存放到文件的内容中去，给该文件保存在磁盘上时disk_inode类型为SFS_TYPE_LINK。对于类型为SFS_TYPE_LINK的disk_inode，执行读写操作时，先读出old_path，然后对old_path执行读写操作；unlink时与删除一个普通文件相同。

## 重要的知识点
> 文件系统、文件读写、内存映射、加载用户程序
